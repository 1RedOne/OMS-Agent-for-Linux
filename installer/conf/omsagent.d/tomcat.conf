<source>
  type tail
  format none
  path /var/log/tomcat*/localhost_access_log.%Y-%m-%d.txt
  pos_file /var/opt/microsoft/omsagent/state/out_oms_api_tomcat.pos
  read_from_head true
  tag oms.api.Tomcat
</source>

<source>
  type tail
  format multiline
  # Match the date at the beginning of each entry, which can be in one of two
  # different formats.
  format_firstline /^(\w+\s\d+,\s\d+)|(\d+-\d+-\d+\s)/
  format1 /(?<message>.*)/
  path /var/log/tomcat*/catalina.out,/var/log/tomcat*/localhost.*.log
  pos_file /var/opt/microsoft/omsagent/state/out_oms_api_tomcat-multiline.pos
  read_from_head true
  tag oms.api.Tomcat
</source>

<filter oms.api.Tomcat>
  type record_transformer
  enable_ruby
  <record>
    Computer ${OMS::Common.get_hostname}
  </record>
</filter>