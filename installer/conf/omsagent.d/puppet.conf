<source>
  type tail
  format multiline
  format_firstline /^\[\d+/
  format1 /(?<message>.*)/
  path /var/log/puppet/masterhttp.log
  pos_file /var/opt/microsoft/omsagent/state/out_oms_api_puppet-masterhttp.pos
  read_from_head true
  tag oms.api.Puppet-http
</source>

<source>
  type tail
  format multiline
  format_firstline /^\[\d+/
  format1 /(?<message>.*)/
  path /var/log/puppet/http.log
  pos_file /var/opt/microsoft/omsagent/state/out_oms_api_puppet-http.pos
  read_from_head true
  tag oms.api.Puppet-http
</source>

<filter oms.api.Puppet-http>
  type record_transformer
  enable_ruby
  <record>
    Computer ${OMS::Common.get_hostname}
  </record>
</filter>